<?php
/**
 * @file
 * Tests for the blocks on project about page.
 */

/**
 * Tests menu links depending on user permissions.
 */
class ProjectAboutPageTest extends FirstRemoteTestCase {
  public static function getInfo() {
    return array(
      'name' => 'Project About Page',
      'description' => 'Tests Project About Page Elements',
      'group' => 'iWheat',
    );
  }

  function setUp() {
    parent::setUp(array('node'));
  }

  function testProjectAboutContent() {
    module_enable(array('contact'));
    $this->resetAll();
    $this->drupalGet('');

    // Check that the field appears in the overview form.
    $this->assertFieldByXPath('//h1[@id="page-title"]', 'About', 'Page title string found...');

    $base_path = '//div[@id="block-system-main"]//div[@class="block-inner clearfix"]//div[@class="content clearfix"]//article     [@id="node-page-69"]//div[@class="content clearfix"]//div[@class="field field-name-body field-type-text-with-summary field-label-hidden"]//div[@class="field-items"]//div[@class="field-item even"]//';

    // Check the first Paragraph
    $this->assertFieldByXPath($base_path . 'p', 'Over the past 10-20 years a large team of collaborators from the Midwest region have been conducting field research, developing extension programs, and implementing Integrated Pest Management (IPM) tools in winter wheat. These collaborations have resulted in significant IPM advancements, however, adoption of proven reduced-risk IPM tools is a work in progress. The Areawide Pest Management Program (AWPM) program revealed that a unified IPM program was needed for hard-red winter wheat producers in the region. To increase adoption of IPM tools in the AWPM program, a readily accessible and easy to use website was developed (iWheat). This site is based on farm level processess, while allowing for field specific management of key insect pests, weeds, and pathogens. The iWheat decision support system will be unified by focusing on regional and local pest detection and evaluation, farm and field level pest management, and reduced risk pest management approaches.', '1st paragraph found');

    // Check that the Wheat Production Guide loads properly
    $this->assertElementByXPath('//p//img[@src="/sites/default/files/styles/medium/public/Wheat1.jpg"]', array(), 'Wheat Picture found');

  }
}



