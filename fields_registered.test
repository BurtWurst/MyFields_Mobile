<?php
/**
As a developer, I want a regression test to prove that the fields and diseases pages of iWheat.org are not affected by a change.
*/

class fieldsregistered extends FirstRemoteTestCase {
  public static function getInfo() {
    return array(
      'name' => 'Fieldschange test',
      'description' => 'Tests fields page when logged in',
      'group' => 'iWheat',
    );
  }

  function setUp()
  {
    parent::setUp(array('node'));
  }
  function RegisteredMenus() 
  {
    module_enable(array('contact'));
    $this->resetAll();
    
    if ($this->loggedInUser) {
      $this->drupalLogout();
    }

    $edit = array(
      'name' => 'kmurph27',
      'pass' => 'dmjx53aw'
    );
    
    $this->drupalPost('user', $edit, 'Log in');

    // If a "log out" link appears on the page, it is almost certainly because
    // the login was successful.
    $pass = $this->assertLink('Log Out', 0, 'User successfully logged in.', 'Other');
    
    //$username = kmurph27;
    //$password = dmjx53aw;
  }
  function testFields()
  {
    module_enable(array('contact'));
    $this->resetAll();

    $this->RegisteredMenus();
    $this->drupalGet('/toolshed/maps/fieldsites');
    $this->testFields();
    
  }
  function MyFields()
  {
     //tests the my fields property 
     $this->assertElementByXPath('//ul[@class="menu links inline"]//li[@class="leaf active-trail active menu-mlid-1766"]//a[@href="/toolshed/maps/fieldsites"]', array(), 'My fields link found.');

     //checks for the add a what field site link
     $this->assertElementByXPath('//div[@class="view view-my-field-sites view-id-my_field_sites view-display-id-page view-dom-id-c651d41fd6c044d93493aed94a2f74d9"]//div[@class="view-header"]//a[@href="/node/add/field-site"]', array(), 'Add a What Field Site found.');

     //tests linux field property 
     $this->assertElementByXPath('//tr[@class="odd views-row-first views-row-last"]//td[@class="views-field views-field-title views-align-center"]//a[@href="/fieldsite/linux"]', array(), 'Linux found.');
  }
}

