<?php
/**
As a developer, I want a regression test to prove that the fields and diseases pages of iWheat.org are not affected by a change.
*/

class DiagKey_Pest_Unregistered_TestCase extends FirstRemoteTestCase {
  public static function getInfo() {
    return array(
      'name' => 'Pest Unregistered Test',
      'description' => 'Tests Pest page when not logged in',
      'group' => 'iWheat',
    );
  }

  function setUp()
  {
    parent::setUp(array('node'));
  }
  function testBugsPresent()
  {
    module_enable(array('contact'));
    $this->resetAll();

    $this->drupalGet('/pests');
    $this->Bugs_Present_Tab();

  }
  function Bugs_Present_Tab()
  {
    //checks for army cutworm text
    $this->assertFieldByXPath('//tr[@class="odd views-row-first"]//td[@class="views-field views-field-title-1 active"]//a[@href="/pests/army-cutworm"]', "Army Cutworm", 'Army Cutwork found.');

    //Check that the army cutwork image exists
    $this->assertElementByXPath('//td[@class="views-field views-field-field-pest-image"]//a[@href="/pests/army-cutworm"]//img[@title="Army Cutworm Larvae"]', array(), 'Army Cutworm image found.');

    //checks for Armyworm text
    $this->assertFieldByXPath('//tr[@class="even"]//td[@class="views-field views-field-title-1 active"]//a[@href="/pests/armyworm"]', "Armyworm", 'Armyworm found.');

    //Check that the armyworm image exists
    $this->assertElementByXPath('//td[@class="views-field views-field-field-pest-image"]//a[@href="/pests/armyworm"]//img[@title="Armyworm"]', array(), 'Armyworm image found.');
  }
}

