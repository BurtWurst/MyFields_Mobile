<?php

/**
 * @file
 * Tests for the home page.
 */

/**
 * Tests menu links depending on user permissions.
 */
class UserPasswordPageTestCase extends FirstRemoteTestCase {
  public static function getInfo() {
    return array(
      'name' => 'User password page',
      'description' => 'Tests user password page',
      'group' => 'iWheat',
    );
  }

  function setUp() {
    parent::setUp(array('node'));
  }

  /**
   * Test that the links are added to the page (no JS testing).
   */
  function testHomePageContent() {
    module_enable(array('contact'));
    $this->resetAll();
        
    // Test the user page when not logged in    
    $this->drupalGet('/user/password');
    
    // Test that the page title displays 'Home'
    $this->assertFieldByXPath('//h1[@id="page-title"]', 'Home', 'Home title found.');
    
    // Test that the Create Account, Log in, and Request password links exist
    $this->assertLink('Create new account', 0, 'Create Account link found', 'Other');
    $this->assertLink('Login', 0, 'Login link found', 'Other');
    $this->assertLink('Request new password', 0, 'New password link found', 'Other');
    
    // Test that the Username block of code exists and displays correctly
    $this->assertFieldByXPath('//label[@for="edit-name"]', 'Username or e-mail address ', 'Username text found');
    $this->assertFieldByXPath('//label[@for="edit-name"]//span[@class="form-required"]', '*', 'Username asterisk text found');
    $this->assertFieldByXPath('//input[@id="edit-name"]', '', 'Username input box found');
    
    // Test that the Login button
    $this->assertFieldByXPath('//input[@value="E-mail new password"]', '', 'Email new password button found.');
  }
}
